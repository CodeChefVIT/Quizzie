{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/Projects/Scholastic-Quiz/src/pages/Quiz.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Grid, Snackbar, FormControl, FormLabel, RadioGroup, FormControlLabel, Radio, Dialog, DialogTitle, Button } from '@material-ui/core';\nimport './Quiz.css';\nimport Loading from \"./Loading\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport InfoContext from \"../context/InfoContext\";\n\nfunction Quiz() {\n  const [currentStep, setStep] = useState(1);\n  const [min, setMin] = useState('10');\n  const [sec, setSec] = useState('00');\n  const [loading, setLoading] = useState(true);\n  const [allQuestions, setQuestions] = useState([]);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [currentAns, setCurrentAns] = useState(null);\n  const [allChosenAns, setAllAns] = useState(null);\n  const [redirect, setRedirect] = useState(false);\n  const [testCompleted, setTestCompleted] = useState(false);\n  const [resultData, setResultData] = useState(null);\n  const [confirmModal, setConfirmModal] = useState(false);\n  const {\n    setBlocked\n  } = useContext(InfoContext);\n  let seconds = 600; //10 min === 600 seconds  Total time in seconds\n\n  let intervalId = null;\n\n  const submitQuiz = async () => {\n    clearInterval(intervalId);\n    setLoading(true);\n    let url = `https://scholastic-quiz-app.herokuapp.com/answer`;\n    let token = localStorage.getItem('authToken');\n    let time = seconds;\n\n    if (token === null) {\n      setRedirect(true);\n    }\n\n    let data = {\n      \"questions\": allChosenAns,\n      \"timeleft\": time\n    };\n\n    try {\n      await axios.put(url, data, {\n        headers: {\n          \"auth-token\": token\n        }\n      }).then(res => {\n        setResultData(res);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n\n    setLoading(false);\n    setTestCompleted(true);\n  };\n\n  const onCloseHandle = () => {\n    setConfirmModal(false);\n  };\n\n  const handleSubmitBtn = () => {\n    setConfirmModal(true);\n  };\n\n  const handleSubmit = event => {\n    submitQuiz();\n  };\n\n  const timesUp = () => {\n    submitQuiz();\n  };\n\n  const _next = () => {\n    let currQues = currentQuestion + 1;\n    setStep(currentStep + 1);\n    setCurrentQuestion(currentQuestion + 1);\n    setCurrentAns(allChosenAns[currQues].option);\n  };\n\n  const _prev = () => {\n    let currQues = currentQuestion - 1;\n    setStep(currentStep - 1);\n    setCurrentQuestion(currentQuestion - 1);\n    setCurrentAns(allChosenAns[currQues].option);\n  };\n\n  const previousButton = () => {\n    if (currentStep !== 1) {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        className: \"quiz-btn prev-button\",\n        onClick: _prev,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 6\n        }\n      }, \"Previous\"));\n    }\n\n    return null;\n  };\n\n  const nextButton = () => {\n    if (currentStep < 25) {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        className: \"quiz-btn next-button\",\n        onClick: _next,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 6\n        }\n      }, \"Next\"));\n    } else if (currentStep === 25) {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        className: \"quiz-btn submit-button\",\n        onClick: handleSubmitBtn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 6\n        }\n      }, \"Submit\"));\n    }\n\n    return null;\n  };\n\n  const tick = () => {\n    var st = seconds;\n    var sr = seconds;\n\n    if (sr > 0) {\n      st--;\n    } else {\n      timesUp();\n    }\n\n    seconds = st;\n    var m = Math.floor(st / 60);\n    var s = st - m * 60;\n\n    if (m < 10) {\n      setMin(\"0\" + m);\n    } else {\n      setMin(m);\n    }\n\n    if (s < 10) {\n      setSec(\"0\" + s);\n    } else {\n      setSec(s);\n    }\n  };\n\n  const handleOptionChange = event => {\n    setCurrentAns(event.target.value);\n    let newState = allChosenAns;\n    newState[currentQuestion].option = event.target.value;\n    setAllAns(newState);\n  };\n\n  const getQuestions = async () => {\n    let token = localStorage.getItem('authToken');\n    let url = `https://scholastic-quiz-app.herokuapp.com/questionsTwentyFive`;\n    let questionsData = [];\n    let answerData = [];\n\n    try {\n      await axios.get(url, {\n        headers: {\n          \"auth-token\": token\n        }\n      }).then(res => {\n        if (res.status === 201) {\n          setRedirect(true);\n          return;\n        } else {\n          res.data[\"questions\"].map(question => {\n            let questionObj = {\n              q_id: question._id,\n              text: question.description,\n              options: question.alternatives\n            };\n            questionsData.push(questionObj);\n            let ansObj = {\n              q_id: question._id,\n              option: null\n            };\n            answerData.push(ansObj);\n          });\n        }\n      });\n      setQuestions(questionsData);\n      setAllAns(answerData);\n    } catch (error) {\n      if (error.response.status === 403) {\n        setRedirect(true);\n        setBlocked(true);\n        return;\n      }\n    }\n\n    setLoading(false);\n    intervalId = setInterval(() => tick(), 1000);\n  };\n\n  useEffect(() => {\n    let token = localStorage.getItem('authToken');\n\n    if (token === null) {\n      setRedirect(true);\n      return;\n    }\n\n    getQuestions();\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, []);\n\n  if (redirect) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 4\n      }\n    });\n  } else if (testCompleted) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/ccquiz\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 4\n      }\n    });\n  } else {\n    return loading ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 14\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"quiz-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      xs: 12,\n      spacing: 5,\n      className: \"quiz-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 10,\n      md: 8,\n      lg: 7,\n      className: \"q-count\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        padding: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 8\n      }\n    }, \"Question \", currentStep)), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 10,\n      md: 8,\n      lg: 7,\n      className: \"timer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        margin: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 8\n      }\n    }, \"Time Remaining \", /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 46\n      }\n    }, min, \":\", sec))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 10,\n      md: 8,\n      lg: 7,\n      style: {\n        margin: 0,\n        padding: '2%',\n        backgroundColor: '#111',\n        borderBottom: '5px solid #222',\n        minHeight: '40vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      style: {\n        margin: 'auto',\n        width: \"100%\"\n      },\n      component: \"fieldset\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(FormLabel, {\n      className: \"label\",\n      component: \"legend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"question\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 57\n      }\n    }, allQuestions[currentQuestion].text)), /*#__PURE__*/React.createElement(RadioGroup, {\n      \"aria-label\": \"correct-choice\",\n      value: currentAns,\n      onChange: handleOptionChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }\n    }, allQuestions[currentQuestion].options.map(option => {\n      return /*#__PURE__*/React.createElement(FormControlLabel, {\n        key: option._id,\n        value: option.text,\n        control: /*#__PURE__*/React.createElement(Radio, {\n          className: \"radio\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 76\n          }\n        }),\n        label: option.text,\n        style: {\n          margin: 0\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 12\n        }\n      });\n    })))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 10,\n      md: 8,\n      lg: 7,\n      className: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 6,\n      className: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 8\n      }\n    }, previousButton()), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 6,\n      className: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 8\n      }\n    }, nextButton()))), /*#__PURE__*/React.createElement(Dialog, {\n      open: confirmModal,\n      onClose: onCloseHandle,\n      \"aria-labelledby\": \"form-dialog-title\",\n      PaperProps: {\n        style: {\n          backgroundColor: '#2d2d2d',\n          color: '#cfcfcf',\n          minWidth: '10%'\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(DialogTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 7\n      }\n    }, \"Are you sure you want to submit the Hunger Games quiz and move on to the Competitive coding section?\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"logout-btn m-right\",\n      onClick: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 8\n      }\n    }, \"Yes\"), /*#__PURE__*/React.createElement(Button, {\n      className: \"cancel-btn m-left\",\n      onClick: onCloseHandle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 8\n      }\n    }, \"No\"))));\n  }\n}\n\nexport default Quiz;","map":{"version":3,"sources":["/Users/mac/Documents/Projects/Scholastic-Quiz/src/pages/Quiz.js"],"names":["React","useState","useEffect","useContext","Grid","Snackbar","FormControl","FormLabel","RadioGroup","FormControlLabel","Radio","Dialog","DialogTitle","Button","Loading","axios","Redirect","InfoContext","Quiz","currentStep","setStep","min","setMin","sec","setSec","loading","setLoading","allQuestions","setQuestions","currentQuestion","setCurrentQuestion","currentAns","setCurrentAns","allChosenAns","setAllAns","redirect","setRedirect","testCompleted","setTestCompleted","resultData","setResultData","confirmModal","setConfirmModal","setBlocked","seconds","intervalId","submitQuiz","clearInterval","url","token","localStorage","getItem","time","data","put","headers","then","res","error","console","log","onCloseHandle","handleSubmitBtn","handleSubmit","event","timesUp","_next","currQues","option","_prev","previousButton","nextButton","tick","st","sr","m","Math","floor","s","handleOptionChange","target","value","newState","getQuestions","questionsData","answerData","get","status","map","question","questionObj","q_id","_id","text","description","options","alternatives","push","ansObj","response","setInterval","padding","margin","backgroundColor","borderBottom","minHeight","width","style","color","minWidth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Grid, Snackbar, FormControl, FormLabel, RadioGroup, FormControlLabel, Radio, Dialog, DialogTitle,\n\t\tButton } from '@material-ui/core'\nimport './Quiz.css';\nimport Loading from \"./Loading\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport InfoContext from \"../context/InfoContext\";\n\nfunction Quiz() {\n\tconst [currentStep, setStep] = useState(1);\n\tconst [min, setMin] = useState('10');\n\tconst [sec, setSec] = useState('00');\n\n\tconst [loading, setLoading] = useState(true);\n\tconst [allQuestions, setQuestions] = useState([]);\n\tconst [currentQuestion, setCurrentQuestion] = useState(0);\n\tconst [currentAns, setCurrentAns] = useState(null);\n\n\tconst [allChosenAns, setAllAns] = useState(null);\n\tconst [redirect, setRedirect] = useState(false);\n\n\tconst [testCompleted, setTestCompleted] = useState(false);\n\tconst [resultData, setResultData] = useState(null);\n\n\tconst [confirmModal, setConfirmModal] = useState(false);\n\n\tconst {setBlocked} = useContext(InfoContext);\n\n\tlet seconds = 600; //10 min === 600 seconds  Total time in seconds\n\tlet intervalId = null;\n\n\tconst submitQuiz = async () => {\n\t\tclearInterval(intervalId);\n\t\tsetLoading(true);\n\t\tlet url = `https://scholastic-quiz-app.herokuapp.com/answer`;\n\t\tlet token = localStorage.getItem('authToken');\n\t\tlet time = seconds;\n\t\tif (token === null) {\n\t\t\tsetRedirect(true);\n\t\t}\n\n\t\tlet data = {\n\t\t\t\"questions\": allChosenAns,\n\t\t\t\"timeleft\": time,\n\t\t}\n\n\t\ttry {\n\t\t\tawait axios.put(url, data, {\n\t\t\t\theaders: {\n\t\t\t\t\t\"auth-token\": token,\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tsetResultData(res);\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t\tsetLoading(false);\n\t\tsetTestCompleted(true);\n\t}\n\n\tconst onCloseHandle = () => {\n\t\tsetConfirmModal(false);\n\t}\n\n\tconst handleSubmitBtn = () => {\n\t\tsetConfirmModal(true);\n\t}\n\n\tconst handleSubmit = (event) => {\n\t\tsubmitQuiz();\n\t}\n\tconst timesUp = () => {\n\t\tsubmitQuiz();\n\t}\n\tconst _next = () => {\n\t\tlet currQues = currentQuestion + 1;\n\t\tsetStep(currentStep + 1)\n\t\tsetCurrentQuestion(currentQuestion + 1);\n\t\tsetCurrentAns(allChosenAns[currQues].option);\n\t}\n\tconst _prev = () => {\n\t\tlet currQues = currentQuestion - 1;\n\t\tsetStep(currentStep - 1);\n\t\tsetCurrentQuestion(currentQuestion - 1);\n\t\tsetCurrentAns(allChosenAns[currQues].option);\n\t}\n\tconst previousButton = () => {\n\t\tif (currentStep !== 1) {\n\t\t\treturn (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"quiz-btn prev-button\" onClick={_prev}>\n\t\t\t\t\t<p>Previous</p>\n\t\t\t\t</button>\n\t\t\t)\n\t\t}\n\t\treturn null;\n\t}\n\n\tconst nextButton = () => {\n\t\tif (currentStep < 25) {\n\t\t\treturn (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"quiz-btn next-button\" onClick={_next}>\n\t\t\t\t\t<p>Next</p>\n\t\t\t\t</button>\n\t\t\t)\n\t\t} else if (currentStep === 25) {\n\t\t\treturn (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"quiz-btn submit-button\" onClick={handleSubmitBtn}>\n\t\t\t\t\t<p>Submit</p>\n\t\t\t\t</button>\n\t\t\t)\n\t\t}\n\t\treturn null;\n\t}\n\n\tconst tick = () => {\n\t\tvar st = seconds;\n\t\tvar sr = seconds;\n\t\tif (sr > 0) {\n\t\t\tst--;\n\t\t}\n\t\telse {\n\t\t\ttimesUp();\n\t\t}\n\t\tseconds = st;\n\t\tvar m = Math.floor(st / 60);\n\t\tvar s = st - (m * 60);\n\t\tif (m < 10) {\n\t\t\tsetMin(\"0\" + m);\n\t\t} else {\n\t\t\tsetMin(m);\n\t\t}\n\t\tif (s < 10) {\n\t\t\tsetSec(\"0\" + s);\n\t\t} else {\n\t\t\tsetSec(s);\n\t\t}\n\n\t}\n\n\tconst handleOptionChange = (event) => {\n\t\tsetCurrentAns(event.target.value);\n\n\t\tlet newState = allChosenAns;\n\t\tnewState[currentQuestion].option = event.target.value;\n\n\t\tsetAllAns(newState);\n\t}\n\n\tconst getQuestions = async () => {\n\t\tlet token = localStorage.getItem('authToken');\n\t\tlet url = `https://scholastic-quiz-app.herokuapp.com/questionsTwentyFive`;\n\n\t\tlet questionsData = [];\n\t\tlet answerData = [];\n\n\t\ttry {\n\t\t\tawait axios.get(url, {\n\t\t\t\theaders: {\n\t\t\t\t\t\"auth-token\": token\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif(res.status === 201) {\n\t\t\t\t\tsetRedirect(true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tres.data[\"questions\"].map((question) => {\n\t\t\t\t\t\tlet questionObj = {\n\t\t\t\t\t\t\tq_id: question._id,\n\t\t\t\t\t\t\ttext: question.description,\n\t\t\t\t\t\t\toptions: question.alternatives,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tquestionsData.push(questionObj);\n\t\n\t\t\t\t\t\tlet ansObj = {\n\t\t\t\t\t\t\tq_id: question._id,\n\t\t\t\t\t\t\toption: null,\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tanswerData.push(ansObj);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetQuestions(questionsData);\n\t\t\tsetAllAns(answerData);\n\t\t} catch (error) {\n\t\t\tif(error.response.status === 403) {\n\t\t\t\tsetRedirect(true);\n\t\t\t\tsetBlocked(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tsetLoading(false);\n\t\tintervalId = setInterval(() => tick(), 1000);\n\t}\n\n\tuseEffect(() => {\n\t\tlet token = localStorage.getItem('authToken');\n\t\tif (token === null) {\n\t\t\tsetRedirect(true);\n\t\t\treturn;\n\t\t}\n\t\tgetQuestions();\n\n\t\treturn () => {\n\t\t\tclearInterval(intervalId);\n\t\t}\n\t}, [])\n\n\tif (redirect) {\n\t\treturn (\n\t\t\t<Redirect to=\"/\" />\n\t\t)\n\t}\n\telse if (testCompleted) {\n\t\treturn (\n\t\t\t<Redirect to=\"/ccquiz\" />\n\t\t)\n\t}\n\telse {\n\t\treturn (\n\t\t\tloading ? <Loading />\n\t\t\t\t:\n\t\t\t\t<div className=\"quiz-page\">\n\t\t\t\t\t<Grid container xs={12} spacing={5} className=\"quiz-container\">\n\t\t\t\t\t\t<Grid item xs={10} md={8} lg={7} className=\"q-count\" >\n\t\t\t\t\t\t\t<h2 style={{ padding: 0 }}>Question {currentStep}</h2>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={10} md={8} lg={7} className=\"timer\">\n\t\t\t\t\t\t\t<p style={{margin: 0}}>Time Remaining <h2>{min}:{sec}</h2></p>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={10} md={8} lg={7} style={{ margin: 0, padding: '2%', backgroundColor: '#111', borderBottom: '5px solid #222', minHeight: '40vh' }}>\n\t\t\t\t\t\t\t<FormControl style={{ margin: 'auto', width: \"100%\" }} component=\"fieldset\">\n\t\t\t\t\t\t\t\t<FormLabel className=\"label\" component=\"legend\"><p className=\"question\">{allQuestions[currentQuestion].text}</p></FormLabel>\n\t\t\t\t\t\t\t\t<RadioGroup aria-label=\"correct-choice\" value={currentAns} onChange={handleOptionChange}>\n\t\t\t\t\t\t\t\t\t{allQuestions[currentQuestion].options.map((option) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<FormControlLabel key={option._id} value={option.text} control={<Radio className=\"radio\" />} label={option.text} style={{ margin: 0 }} />\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={10} md={8} lg={7} className=\"button\" >\n\t\t\t\t\t\t\t<Grid item xs={6} className=\"button\">\n\t\t\t\t\t\t\t\t{previousButton()}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6} className=\"button\">\n\t\t\t\t\t\t\t\t{nextButton()}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\n\t\t\t\t\t<Dialog open={confirmModal} onClose={onCloseHandle} aria-labelledby=\"form-dialog-title\"\n\t\t\t\t\t\tPaperProps={{ style: { backgroundColor: '#2d2d2d', color: '#cfcfcf', minWidth: '10%' } }}>\n\t\t\t\t\t\t<DialogTitle>Are you sure you want to submit the Hunger Games quiz and move on to the Competitive coding section?</DialogTitle>\n\t\t\t\t\t\t<div className=\"btn-div\">\n\t\t\t\t\t\t\t<Button className=\"logout-btn m-right\" onClick={handleSubmit}>Yes</Button>\n\t\t\t\t\t\t\t<Button className=\"cancel-btn m-left\" onClick={onCloseHandle}>No</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Dialog>\n\t\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Quiz;"]},"metadata":{},"sourceType":"module"}