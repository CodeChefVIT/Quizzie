{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/Projects/Quizzie/Frontend/src/components/AllQues.js\";\nimport React from 'react';\nimport MaterialTable from \"material-table\";\nimport { Alert } from \"@material-ui/lab\";\nimport Loading from \"../pages/Loading\";\nimport axios from \"axios\";\nimport { Grid } from \"@material-ui/core\";\nexport default function AllQues() {\n  const [alert, setAlert] = React.useState(false);\n  const [alertText, setAlertText] = React.useState('');\n  const [loading, setLoading] = React.useState(true);\n  const columns = [{\n    field: 'qid',\n    title: 'Q_ID',\n    minwidth: 10,\n    editable: 'never'\n  }, {\n    field: 'ques',\n    title: 'Question',\n    minWidth: 200\n  }, {\n    field: 'op1',\n    title: 'Option1',\n    minWidth: 50\n  }, {\n    field: 'op2',\n    title: 'Option2',\n    minWidth: 50\n  }, {\n    field: 'op3',\n    title: 'Option3',\n    minWidth: 50\n  }, {\n    field: 'op4',\n    title: 'Option4',\n    minWidth: 50\n  }, {\n    field: 'correct',\n    title: 'Correct Option',\n    minWidth: 50\n  }];\n\n  function createData(id, q, o1, o2, o3, o4, c) {\n    return {\n      qid: id,\n      ques: q,\n      op1: o1,\n      op2: o2,\n      op3: o3,\n      op4: o4,\n      correct: c\n    };\n  }\n\n  const [rows, setRows] = React.useState([]);\n\n  const update = async (ndata, odata) => {\n    if (ndata.qid === odata.qid) {\n      let error = false;\n\n      if (ndata.ques.length === 0) {\n        error = true;\n        setAlert(true);\n        setAlertText('Fields cannot be empty');\n      }\n\n      if (ndata.op1.length === 0) {\n        error = true;\n        setAlert(true);\n        setAlertText('Fields cannot be empty');\n      }\n\n      if (ndata.op2.length === 0) {\n        error = true;\n        setAlert(true);\n        setAlertText('Fields cannot be empty');\n      }\n\n      if (ndata.op3.length === 0) {\n        error = true;\n        setAlert(true);\n        setAlertText('Fields cannot be empty');\n      }\n\n      if (ndata.op4.length === 0) {\n        error = true;\n        setAlert(true);\n        setAlertText('Fields cannot be empty');\n      }\n\n      if (ndata.correct.length === 0) {\n        error = true;\n        setAlert(true);\n        setAlertText('Fields cannot be empty');\n      }\n\n      if (ndata.op1 === ndata.op2 || ndata.op1 === ndata.op3 || ndata.op1 === ndata.op4 || ndata.op2 === ndata.op3 || ndata.op2 === ndata.op4 || ndata.op3 === ndata.op4) {\n        error = true;\n        setAlert(true);\n        setAlertText('Options cannot be repeated');\n      }\n\n      if (!(ndata.correct === ndata.op1 || ndata.correct === ndata.op2 || ndata.correct === ndata.op3 || ndata.correct === ndata.op4)) {\n        error = true;\n        setAlert(true);\n        setAlertText('Correct option must be from provided options');\n      }\n\n      if (!error) {\n        let token = localStorage.getItem('authToken');\n        let url = `https://scholastic-quiz-app.herokuapp.com/questions/${ndata.qid}`;\n        let data = {\n          \"description\": ndata.ques,\n          \"correct_answer\": ndata.correct,\n          \"alternatives\": [{\n            \"text\": ndata.op1\n          }, {\n            \"text\": ndata.op2\n          }, {\n            \"text\": ndata.op3\n          }, {\n            \"text\": ndata.op4\n          }]\n        };\n        let response = null;\n\n        try {\n          await axios.put(url, data, {\n            headers: {\n              \"auth-token\": token\n            }\n          }).then(res => {\n            response = res;\n          });\n\n          if (response.status === 200) {\n            getAll();\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      } else {\n        setTimeout(() => {\n          setAlert(false);\n          setAlertText('');\n        }, 5000);\n      }\n    }\n  };\n\n  const del = async data => {\n    let token = localStorage.getItem('authToken');\n    let url = `https://scholastic-quiz-app.herokuapp.com/questions/${data.qid}`;\n    let response = null;\n\n    try {\n      await axios.delete(url, {\n        headers: {\n          \"auth-token\": token\n        }\n      }).then(res => {\n        response = res;\n      });\n\n      if (response.status === 204) {\n        getAll();\n      }\n    } catch (error) {\n      console.log(error);\n    }\n\n    setLoading(false);\n    getAll();\n  };\n\n  const getAll = async () => {\n    let token = localStorage.getItem('authToken');\n    let url = `https://scholastic-quiz-app.herokuapp.com/questions`;\n    let response = null;\n    let i = 0;\n    let data = [];\n    setRows(null);\n\n    try {\n      await axios.get(url, {\n        headers: {\n          \"auth-token\": token\n        }\n      }).then(res => {\n        response = res;\n      });\n\n      if (response.status === 200) {\n        for (i = 0; i < response.data.length; i++) {\n          var id = response.data[i]._id;\n          var ques = response.data[i].description;\n          var correct = response.data[i].correct_answer;\n          var o1 = response.data[i].alternatives[0].text;\n          var o2 = response.data[i].alternatives[1].text;\n          var o3 = response.data[i].alternatives[2].text;\n          var o4 = response.data[i].alternatives[3].text;\n          data = [...data, createData(id, ques, o1, o2, o3, o4, correct)];\n        }\n\n        setRows(data);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n\n    setLoading(false);\n  };\n\n  React.useEffect(() => {\n    getAll();\n  }, []);\n  return loading ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 18\n    }\n  }) : /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      maxWidth: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      marginLeft: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"Questions List\",\n    columns: columns,\n    data: rows,\n    style: {\n      width: '98%',\n      backgroundColor: '#2d2d2d',\n      color: '#cfcfcf'\n    },\n    options: {\n      headerStyle: {\n        backgroundColor: '#1e1e1e'\n      },\n      rowStyle: {\n        color: '#ccc'\n      }\n    },\n    editable: {\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n          update(newData, oldData);\n        }, 600);\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n          del(oldData);\n        }, 600);\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 4\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 4\n    }\n  }, alert === true ? /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 22\n    }\n  }, alertText) : null));\n}","map":{"version":3,"sources":["/Users/mac/Documents/Projects/Quizzie/Frontend/src/components/AllQues.js"],"names":["React","MaterialTable","Alert","Loading","axios","Grid","AllQues","alert","setAlert","useState","alertText","setAlertText","loading","setLoading","columns","field","title","minwidth","editable","minWidth","createData","id","q","o1","o2","o3","o4","c","qid","ques","op1","op2","op3","op4","correct","rows","setRows","update","ndata","odata","error","length","token","localStorage","getItem","url","data","response","put","headers","then","res","status","getAll","console","log","setTimeout","del","delete","i","get","_id","description","correct_answer","alternatives","text","useEffect","display","justifyContent","maxWidth","marginLeft","width","backgroundColor","color","headerStyle","rowStyle","onRowUpdate","newData","oldData","Promise","resolve","onRowDelete"],"mappings":"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","sourcesContent":["import React from 'react';\nimport MaterialTable from \"material-table\";\nimport {Alert} from \"@material-ui/lab\";\nimport Loading from \"../pages/Loading\";\nimport axios from \"axios\";\nimport {Grid} from \"@material-ui/core\";\n\nexport default function AllQues(){\n\n\tconst [alert, setAlert] = React.useState(false);\n\tconst [alertText, setAlertText] = React.useState('');\n\tconst [loading, setLoading] = React.useState(true);\n\tconst columns = [\n\t\t{ field: 'qid', title: 'Q_ID', minwidth: 10, editable: 'never' },\n\t\t{ field: 'ques', title: 'Question', minWidth: 200 }, { field: 'op1', title: 'Option1', minWidth: 50 },\n\t\t{ field: 'op2', title: 'Option2', minWidth: 50 }, { field: 'op3', title: 'Option3', minWidth: 50 },\n\t\t{ field: 'op4', title: 'Option4', minWidth: 50 }, { field: 'correct', title: 'Correct Option', minWidth: 50 },\n\t];\n\tfunction createData(id, q, o1, o2, o3, o4, c) {\n\t\treturn { qid: id, ques: q, op1: o1, op2: o2, op3: o3, op4: o4, correct: c }\n\t}\n\tconst [rows, setRows] = React.useState([]);\n\n\tconst update = async(ndata, odata) => {\n\t\tif(ndata.qid === odata.qid){\n\t\t\tlet error = false;\n\t\t\tif(ndata.ques.length === 0){\n\t\t\t\terror = true;\n\t\t\t\tsetAlert(true);\n\t\t\t\tsetAlertText('Fields cannot be empty');\n\t\t\t}\n\t\t\tif(ndata.op1.length === 0){\n\t\t\t\terror = true;\n\t\t\t\tsetAlert(true);\n\t\t\t\tsetAlertText('Fields cannot be empty');\n\t\t\t}\n\t\t\tif(ndata.op2.length === 0){\n\t\t\t\terror = true;\n\t\t\t\tsetAlert(true);\n\t\t\t\tsetAlertText('Fields cannot be empty');\n\t\t\t}\n\t\t\tif(ndata.op3.length === 0){\n\t\t\t\terror = true;\n\t\t\t\tsetAlert(true);\n\t\t\t\tsetAlertText('Fields cannot be empty');\n\t\t\t}\n\t\t\tif(ndata.op4.length === 0){\n\t\t\t\terror = true;\n\t\t\t\tsetAlert(true);\n\t\t\t\tsetAlertText('Fields cannot be empty');\n\t\t\t}\n\t\t\tif(ndata.correct.length === 0){\n\t\t\t\terror = true;\n\t\t\t\tsetAlert(true);\n\t\t\t\tsetAlertText('Fields cannot be empty');\n\t\t\t}\n\t\t\tif(ndata.op1 === ndata.op2 || ndata.op1=== ndata.op3 || ndata.op1 === ndata.op4 || ndata.op2 === ndata.op3 || ndata.op2 === ndata.op4 || ndata.op3 === ndata.op4){\n\t\t\t\terror = true;\n\t\t\t\tsetAlert(true);\n\t\t\t\tsetAlertText('Options cannot be repeated');\n\t\t\t}\n\t\t\tif(!(ndata.correct === ndata.op1 || ndata.correct === ndata.op2 || ndata.correct === ndata.op3 || ndata.correct === ndata.op4)){\n\t\t\t\terror = true;\n\t\t\t\tsetAlert(true);\n\t\t\t\tsetAlertText('Correct option must be from provided options');\n\t\t\t}\n\t\t\tif(!error){\n\t\t\t\tlet token = localStorage.getItem('authToken');\n\t\t\t\tlet url = `https://scholastic-quiz-app.herokuapp.com/questions/${ndata.qid}`\n\t\t\t\tlet data = {\n\t\t\t\t\t\"description\" : ndata.ques,\n\t\t\t\t\t\"correct_answer\" : ndata.correct,\n\t\t\t\t\t\"alternatives\" : [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"text\" : ndata.op1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"text\" : ndata.op2\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"text\" : ndata.op3\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"text\" : ndata.op4\n\t\t\t\t\t\t}\n\t\t\t\t\t] \n\t\t\t\t}\n\t\t\t\tlet response = null;\n\t\t\t\ttry {\n\t\t\t\t\tawait axios.put(url,data,{\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"auth-token\" : token\n\t\t\t\t\t\t}}).then(res => {\n\t\t\t\t\t\tresponse = res;\n\t\t\t\t\t});\n\t\t\t\t\tif(response.status === 200) {\n\t\t\t\t\t\tgetAll();\n\t\t\t\t\t}\n\t\t\t\t} catch(error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetAlert(false);\n\t\t\t\t\tsetAlertText('');\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t}\n\n\tconst del = async(data) => {\n\t\tlet token = localStorage.getItem('authToken');\n\t\tlet url = `https://scholastic-quiz-app.herokuapp.com/questions/${data.qid}`;\n\t\tlet response = null;\n\n\t\ttry {\n\t\t\tawait axios.delete(url, {\n\t\t\t\theaders: {\n\t\t\t\t\t\"auth-token\": token\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tresponse = res;\n\t\t\t});\n\t\t\tif(response.status === 204){\n\t\t\t\tgetAll();\n\t\t\t}\n\n\t\t} catch(error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t\tsetLoading(false);\n\t\tgetAll();\n\t}\n    \n\tconst getAll = async() => {\n\t\tlet token = localStorage.getItem('authToken');\n\t\tlet url = `https://scholastic-quiz-app.herokuapp.com/questions`;\n\t\tlet response = null;\n\t\tlet i = 0;\n\t\tlet data = [];\n\t\tsetRows(null);\n\t\ttry {\n\t\t\tawait axios.get(url, {\n\t\t\t\theaders: {\n\t\t\t\t\t\"auth-token\": token\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tresponse = res;\n\t\t\t});\n\t\t\tif(response.status === 200){\n\t\t\t\tfor(i = 0; i < response.data.length; i++){\n\t\t\t\t\tvar id = response.data[i]._id;\n\t\t\t\t\tvar ques = response.data[i].description;\n\t\t\t\t\tvar correct = response.data[i].correct_answer;\n\t\t\t\t\tvar o1 = response.data[i].alternatives[0].text;\n\t\t\t\t\tvar o2 = response.data[i].alternatives[1].text;\n\t\t\t\t\tvar o3 = response.data[i].alternatives[2].text;\n\t\t\t\t\tvar o4 = response.data[i].alternatives[3].text;\n\t\t\t\t\t\n\t\t\t\t\tdata = [...data, createData(id,ques,o1,o2,o3,o4,correct)]\n\t\t\t\t}\n\t\t\t\tsetRows(data);\n\t\t\t}\n\n\t\t} catch(error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t\tsetLoading(false);\n\t}\n\n    React.useEffect(() => {\n\t\tgetAll();\n    }, []);\n\n    return(\n        loading? <Loading />\n        :\n        <Grid container spacing={3} style={{display:'flex', justifyContent: 'center', maxWidth: '100%'}}>\n\t\t\t<Grid item xs={12} style={{display: 'flex', justifyContent: 'center', marginLeft: 25}}>\n\t\t\t<MaterialTable\n\t\t\t title=\"Questions List\"\n\t\t\t columns={columns}\n\t\t\t data = {rows}\n\t\t\t style={{width:'98%', backgroundColor: '#2d2d2d', color: '#cfcfcf'}}\n\t\t\t options={{\n\t\t\t\t headerStyle: {\n\t\t\t\t\tbackgroundColor: '#1e1e1e'\n\t\t\t\t },\n\t\t\t\t rowStyle: {\n\t\t\t\t\t color: '#ccc'\n\t\t\t\t }\n\t\t\t }}\n\t\t\t editable={{\n\t\t\t\tonRowUpdate: (newData, oldData) =>\n\t\t\t\t  new Promise((resolve) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t  resolve();\n\t\t\t\t\t  update(newData, oldData);\n\t\t\t\t\t}, 600);\n\t\t\t\t  }),\n\t\t\t\tonRowDelete: (oldData) =>\n\t\t\t\t  new Promise((resolve) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t  resolve();\n\t\t\t\t\t  del(oldData);\n\t\t\t\t\t}, 600);\n\t\t\t\t  }),\n\t\t\t  }}\n\t\t\t />\t\n\t\t\t</Grid>\n            \n\t\t\t<Grid item xs={10}>\n\t\t\t\t{alert === true? <Alert severity=\"error\">{alertText}</Alert>: null}\n\t\t\t</Grid>\n\t\t</Grid>\n    )\n}"]},"metadata":{},"sourceType":"module"}